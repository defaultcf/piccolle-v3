<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">

<dom-module id="x-search">
    <template>
        <paper-input label="欲望のままに" no-label-float value="{{str}}">
            <paper-icon-button slot="suffix" icon="search"></paper-icon-button>
        </paper-input-container>

        <iron-ajax auto
            url="/search"
            params="[[_formatParams(str, n)]]"
            debounce-duration="1000"
        ></iron-ajax>
    </template>

    <script>
    class XSearch extends Polymer.Element {
        static get is() { return 'x-search'; }
        static get properties() {
            return {
                str: {
                    type: String,
                    value: ''
                },
                n: {
                    type:Number,
                    value: 3
                }
            }
        }
        _formatParams(str, n) {
            return {"str": str, "n": n};
        }
    }
    customElements.define(XSearch.is, XSearch);
    </script>
</dom-module>
